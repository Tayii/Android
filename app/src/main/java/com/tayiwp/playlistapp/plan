поток для обновления песен каждые 5 секунд

точки входа:

1) введено имя стримера
2) загрузить плейлист безусловно - loadStreamerPlaylist(false)

1) плеер инициализирован
2) загрузить плейлист безусловно - loadStreamerPlaylist(false)
// 3) если СИНХ или ОБН включить асинхронное обновление

1) песня окончила играть
2) если !СИНХ и ПЕРЕ перейти на следующую песню безусловно - switchToNextSong

1) нажата песня в плейлисте
2) если !СИНХ перейти на эту песню безусловно

1) нажат переход на предыдущую песню
2) если !СИНХ перейти на предыдущую песню безусловно

1) нажат переход на следующую песню
2) если !СИНХ перейти на предыдущую песню безусловно

1) выбран пункт меню "синхронизация" СИНХ
2) если СИНХ включить асинхронное обновление

1) выбран пункт меню "автообновление" ОБН
2) если ОБН включить асинхронное обновление

1) выбран пункт меню "автопереключение" ПЕРЕ

процедуры:

включить асихронное обновление
1) если СИНХ или ОБН
2) если задачи не существует, создать асинхронную задачу

асинхронная задача
1) пока СИНХ или ОБН
2) обновить плейлист безусловно

загрузить плейлист - loadStreamerPlaylist(boolean safe)
1) загрузить плейлист с сервера
2) обновить плейлист (безусловно или нет) - updatePlaylistView
3) обновить текущую песню (безусловно или нет) - updateCurrentSong
4) воспроизвести текущую песню (безусловно или нет) - playCurrentSong

обновить плейлист безусловно - updatePlaylistView
1) если не null, записать плейлист в listview
2) иначе очистить listview

обновить текущую песню безусловно - updateCurrentSong
1) если плейлист не null, обновить описание текущей песни
2) иначе очистить описание

воспроизвести текущую песню безусловно - playCurrentSong
1) если текущая песня не null, загрузить ее в плеер
2) иначе загрузить в плеер пустой id

перейти на следующую песню - switchToNextSong
1) перейти на песню + 1 - switchToSong

перейти на песню - switchToSongSafe
1) если !СИНХ перейти на песню безусловно - switchToSong

перейти на песню безусловно - switchToSong
1) обновить текущую песню - updateCurrentSong

цепочки действий:

1) активити загружено
2) плеер инициализирован
3) загрузить плейлист с сервера - loadStreamerPlaylist(false)
1) если не null, записать плейлист в listview  - updatePlaylistView
2) иначе очистить listview
1) если плейлист не null, обновить описание текущей песни - updateCurrentSong
2) иначе очистить описание
1) если текущая песня не null, загрузить ее в плеер - playCurrentSong
2) иначе загрузить в плеер пустой id
// 4) если СИНХ или ОБН включить асинхронное обновление

1) введено имя стримера
3) загрузить плейлист с сервера - loadStreamerPlaylist(false)
1) если не null, записать плейлист в listview  - updatePlaylistView
2) иначе очистить listview
1) если плейлист не null, обновить описание текущей песни - updateCurrentSong
2) иначе очистить описание
1) если текущая песня не null, загрузить ее в плеер - playCurrentSong
2) иначе загрузить в плеер пустой id

1) песня окончила играть
2) если !СИНХ и ПЕРЕ перейти на следующую песню безусловно - switchToNextSong
1) перейти на песню + 1 - switchToSong
1) если плейлист не null, обновить описание текущей песни - updateCurrentSong
2) иначе очистить описание
1) если текущая песня не null, загрузить ее в плеер - playCurrentSong
2) иначе загрузить в плеер пустой id

1) нажата песня в плейлисте
1) если !СИНХ - switchToSongSafe
1) перейти на песню безусловно - switchToSong
1) если плейлист не null, обновить описание текущей песни - updateCurrentSong
2) иначе очистить описание
1) если текущая песня не null, загрузить ее в плеер - playCurrentSong
2) иначе загрузить в плеер пустой id
